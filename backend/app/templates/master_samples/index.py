"""
Master Samples Loader - P0 HOTFIX v2
ë§ˆìŠ¤í„° ìƒ˜í”Œ JSON íŒŒì¼ ë¡œë“œ (BOM ì²˜ë¦¬ + 0ê°œ í´ë°±)
"""
import json
import logging
from pathlib import Path
from typing import Dict, Any, Optional

logger = logging.getLogger(__name__)

_MASTER_SAMPLES_CACHE: Dict[str, Dict[str, Any]] = {}

# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
# ðŸ”¥ P0: 0ê°œ ë¡œë“œ ì‹œ í´ë°±ìš© ë‚´ìž¥ ê¸°ë³¸ ìƒ˜í”Œ
# â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EMBEDDED_MASTER_SAMPLES = {
    "exec": {
        "section_id": "exec",
        "title": "2026 ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëžµ ê¸°ìƒë„",
        "body_markdown": """## 2026ë…„ ë¹„ì¦ˆë‹ˆìŠ¤ ê¸°ìƒë„: ì „ì²´ íë¦„ ì§„ë‹¨

**[ì—”ì§„ ê²°ë¡ ]** ê·€í•˜ì˜ ì›êµ­ êµ¬ì¡°ì— ë”°ë¥´ë©´ 2026ë…„ì€ ë³€í™”ì™€ ë„ì „ì˜ ê¸°ìš´ì´ ê°ì§€ë©ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ì›êµ­ì˜ êµ¬ì¡°ë¡œ ì¸í•´, í•´ë‹¹ ì—…ì¢…ì—ì„œ í˜„ìž¬ ë³‘ëª© í˜„ìƒì´ ë‘ë“œëŸ¬ì§€ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.

### ë¦¬ìŠ¤í¬ 2ê°œ
1. **ì‹œìž¥ ë³€ë™ì„±**: íŠ¸ë¦¬ê±° - ì™¸ë¶€ í™˜ê²½ ë³€í™” / í”¼í•´ - ë§¤ì¶œ ê°ì†Œ / ì¡°ê¸°ê²½ë³´ - ì„ í–‰ì§€í‘œ ëª¨ë‹ˆí„°ë§
2. **ì‹¤í–‰ë ¥ ì €í•˜**: íŠ¸ë¦¬ê±° - ë¦¬ì†ŒìŠ¤ ë¶„ì‚° / í”¼í•´ - ê¸°íšŒ ì†ì‹¤ / ì¡°ê¸°ê²½ë³´ - ì£¼ê°„ KPI ì²´í¬

### ì•¡ì…˜ 3ê°œ
- **D+14**: í˜„í™© ì ê²€ ë° ë°ì´í„° ìˆ˜ì§‘
- **D+30**: í•µì‹¬ ì§€í‘œ ëª¨ë‹ˆí„°ë§ ì‹œìž‘
- **D+60**: ì „ëžµ ìž¬ìˆ˜ë¦½ ë° ì‹¤í–‰

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] í˜„ìž¬ ìƒí™© ê°ê´€ì  ì§„ë‹¨
- [ ] í•µì‹¬ ì§€í‘œ ì •ì˜
- [ ] ë°ì´í„° ìˆ˜ì§‘ ì²´ê³„ êµ¬ì¶•
- [ ] ì£¼ê°„ ë¦¬ë·° ì¼ì • í™•ì •
- [ ] íŒ€ ì—­í•  ìž¬ì •ì˜
- [ ] ë¦¬ìŠ¤í¬ ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤ ì¤€ë¹„
- [ ] ì „ë¬¸ê°€ ìƒë‹´ ê²€í† 
"""
    },
    "money": {
        "section_id": "money",
        "title": "ìžë³¸ ìœ ë™ì„± ë° í˜„ê¸ˆíë¦„ ìµœì í™”",
        "body_markdown": """## ìžë³¸ ìœ ë™ì„± ë° í˜„ê¸ˆíë¦„ ìµœì í™”

**[ì—”ì§„ ê²°ë¡ ]** ì›êµ­ì˜ ìž¬ì„± êµ¬ì¡°ì— ë”°ë¼ í˜„ê¸ˆíë¦„ ê´€ë¦¬ê°€ í•µì‹¬ ê³¼ì œìž…ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ìž¬ì„±ì˜ ë°°ì¹˜ë¡œ ì¸í•´, ë§¤ì¶œ ë³€ë™ì„±ê³¼ ìžê¸ˆ íšŒì „ ì´ìŠˆê°€ ì˜ˆìƒë©ë‹ˆë‹¤.

### ë¦¬ìŠ¤í¬ 2ê°œ
1. **í˜„ê¸ˆíë¦„ ë¶ˆì•ˆì •**: íŠ¸ë¦¬ê±° - ë§¤ì¶œ ì§€ì—° / í”¼í•´ - ìš´ì˜ìžê¸ˆ ë¶€ì¡± / ì¡°ê¸°ê²½ë³´ - AR íšŒì „ì¼ ëª¨ë‹ˆí„°ë§
2. **ê³¼ìž‰ íˆ¬ìž**: íŠ¸ë¦¬ê±° - ì„±ê¸‰í•œ í™•ìž¥ / í”¼í•´ - ìœ ë™ì„± ìœ„ê¸° / ì¡°ê¸°ê²½ë³´ - ì›”ë³„ íˆ¬ìž í•œë„ ì„¤ì •

### ì•¡ì…˜ 3ê°œ
- **D+14**: í˜„ê¸ˆíë¦„í‘œ ìž‘ì„± ë° ë¶„ì„
- **D+30**: ë§¤ì¶œì±„ê¶Œ íšŒìˆ˜ í”„ë¡œì„¸ìŠ¤ ì •ë¹„
- **D+60**: 3ê°œì›” ìžê¸ˆ ì˜ˆì¸¡ ì‹œìŠ¤í…œ êµ¬ì¶•

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] ì›”ë³„ í˜„ê¸ˆíë¦„ ì¶”ì´ ë¶„ì„
- [ ] ì£¼ìš” ë§¤ì¶œì²˜ ê²°ì œ ì¡°ê±´ ê²€í† 
- [ ] ë¹„ìš© êµ¬ì¡° ìµœì í™” ë°©ì•ˆ ìˆ˜ë¦½
- [ ] ë¹„ìƒ ìžê¸ˆ í™•ë³´ ê³„íš
- [ ] íˆ¬ìž ìš°ì„ ìˆœìœ„ ìž¬ì •ë ¬
- [ ] ê¸ˆìœµê¸°ê´€ ê´€ê³„ ì ê²€
- [ ] ì„¸ê¸ˆ/ê³µê³¼ê¸ˆ ì¼ì • í™•ì¸
"""
    },
    "business": {
        "section_id": "business",
        "title": "ì‹œìž¥ í¬ì§€ì…”ë‹ ë° ìƒí’ˆ í™•ìž¥ ì „ëžµ",
        "body_markdown": """## ì‹œìž¥ í¬ì§€ì…”ë‹ ë° ìƒí’ˆ í™•ìž¥ ì „ëžµ

**[ì—”ì§„ ê²°ë¡ ]** ì›êµ­ì˜ ê´€ì„± êµ¬ì¡°ì— ë”°ë¼ ì‹œìž¥ í¬ì§€ì…”ë‹ ìž¬ê²€í† ê°€ í•„ìš”í•©ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ê´€ì„±ì˜ ìž‘ìš©ìœ¼ë¡œ ì¸í•´, ê²½ìŸ í™˜ê²½ì—ì„œ ì°¨ë³„í™” ì „ëžµì´ ì¤‘ìš”í•´ì§‘ë‹ˆë‹¤.

### ë¦¬ìŠ¤í¬ 2ê°œ
1. **í¬ì§€ì…”ë‹ ëª¨í˜¸**: íŠ¸ë¦¬ê±° - ì‹œìž¥ ë³€í™” / í”¼í•´ - ê³ ê° ì´íƒˆ / ì¡°ê¸°ê²½ë³´ - NPS ì¶”ì´ í™•ì¸
2. **í™•ìž¥ ì‹¤íŒ¨**: íŠ¸ë¦¬ê±° - ì¤€ë¹„ ë¶€ì¡± / í”¼í•´ - ìžì› ë‚­ë¹„ / ì¡°ê¸°ê²½ë³´ - íŒŒì¼ëŸ¿ í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ì•¡ì…˜ 3ê°œ
- **D+14**: ê²½ìŸì‚¬ ë¶„ì„ ë° ë²¤ì¹˜ë§ˆí‚¹
- **D+30**: í•µì‹¬ ê°€ì¹˜ ì œì•ˆ ìž¬ì •ì˜
- **D+60**: ì‹ ê·œ ìƒí’ˆ/ì„œë¹„ìŠ¤ ë¡œë“œë§µ ìˆ˜ë¦½

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] íƒ€ê²Ÿ ê³ ê° ì„¸ê·¸ë¨¼íŠ¸ ìž¬ì •ì˜
- [ ] ê²½ìŸ ìš°ìœ„ ìš”ì†Œ ë„ì¶œ
- [ ] ê°€ê²© ì „ëžµ ê²€í† 
- [ ] ì±„ë„ ì „ëžµ ìµœì í™”
- [ ] ë¸Œëžœë“œ ë©”ì‹œì§€ ì •ë¹„
- [ ] íŒŒíŠ¸ë„ˆì‹­ ê¸°íšŒ íƒìƒ‰
- [ ] ì‹œìž¥ íŠ¸ë Œë“œ ëª¨ë‹ˆí„°ë§ ì²´ê³„
"""
    },
    "team": {
        "section_id": "team",
        "title": "ì¡°ì§ í™•ìž¥ ë° íŒŒíŠ¸ë„ˆì‹­ ê°€ì´ë“œ",
        "body_markdown": """## ì¡°ì§ í™•ìž¥ ë° íŒŒíŠ¸ë„ˆì‹­ ê°€ì´ë“œ

**[ì—”ì§„ ê²°ë¡ ]** ì›êµ­ì˜ ë¹„ê² êµ¬ì¡°ì— ë”°ë¼ íŒŒíŠ¸ë„ˆì‹­ê³¼ íŒ€ ê´€ë¦¬ê°€ í•µì‹¬ìž…ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ë¹„ê²ì˜ ë°°ì¹˜ë¡œ ì¸í•´, í˜‘ë ¥ ê´€ê³„ì—ì„œ ì—­í•  ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

### ë¦¬ìŠ¤í¬ 2ê°œ
1. **íŒ€ ê°ˆë“±**: íŠ¸ë¦¬ê±° - ì—­í•  ëª¨í˜¸ / í”¼í•´ - ìƒì‚°ì„± ì €í•˜ / ì¡°ê¸°ê²½ë³´ - ì •ê¸° 1:1 ë¯¸íŒ…
2. **íŒŒíŠ¸ë„ˆì‹­ ì‹¤íŒ¨**: íŠ¸ë¦¬ê±° - ì´í•´ê´€ê³„ ë¶ˆì¼ì¹˜ / í”¼í•´ - ê¸°íšŒë¹„ìš© / ì¡°ê¸°ê²½ë³´ - ê³„ì•½ ì¡°ê±´ ëª…í™•í™”

### ì•¡ì…˜ 3ê°œ
- **D+14**: ì¡°ì§ êµ¬ì¡° ë° ì—­í•  ìž¬ì •ì˜
- **D+30**: í•µì‹¬ ì¸ìž¬ í™•ë³´ ê³„íš ìˆ˜ë¦½
- **D+60**: íŒŒíŠ¸ë„ˆì‹­ í‰ê°€ ë° ìž¬ê³„ì•½ ê²€í† 

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] í˜„ìž¬ ì¡°ì§ë„ ë° ì—­í•  ë§¤íŠ¸ë¦­ìŠ¤ ìž‘ì„±
- [ ] í•µì‹¬ ì—­ëŸ‰ ê°­ ë¶„ì„
- [ ] ì±„ìš© íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
- [ ] ì„±ê³¼ í‰ê°€ ê¸°ì¤€ ì •ë¹„
- [ ] íŒŒíŠ¸ë„ˆ ê´€ê³„ í˜„í™© ì ê²€
- [ ] í˜‘ì—… í”„ë¡œì„¸ìŠ¤ ê°œì„ 
- [ ] íŒ€ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ ê°•í™” ë°©ì•ˆ
"""
    },
    "health": {
        "section_id": "health",
        "title": "ì£¼ìš” ìž¥ì• ë¬¼ ë° ë¦¬ìŠ¤í¬ (2026)",
        "body_markdown": """## ì£¼ìš” ìž¥ì• ë¬¼ ë° ë¦¬ìŠ¤í¬ (2026)

**[ì—”ì§„ ê²°ë¡ ]** í˜„ìž¬ êµ¬ì¡°ìƒ ì£¼ìš” ë¦¬ìŠ¤í¬ ìš”ì†Œë¥¼ ì„ ì œì ìœ¼ë¡œ ê´€ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ì›êµ­ì˜ ì¶©/í˜•/íŒŒ êµ¬ì¡°ë¡œ ì¸í•´, ì˜ˆê¸°ì¹˜ ì•Šì€ ìž¥ì• ë¬¼ì´ ë°œìƒí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

### ë¦¬ìŠ¤í¬ 2ê°œ
1. **ë²ˆì•„ì›ƒ**: íŠ¸ë¦¬ê±° - ê³¼ë¶€í•˜ / í”¼í•´ - ì˜ì‚¬ê²°ì • í’ˆì§ˆ ì €í•˜ / ì¡°ê¸°ê²½ë³´ - ì£¼ê°„ ì—ë„ˆì§€ ì²´í¬
2. **ì™¸ë¶€ ë¦¬ìŠ¤í¬**: íŠ¸ë¦¬ê±° - ì‹œìž¥/ê·œì œ ë³€í™” / í”¼í•´ - ì‚¬ì—… ì—°ì†ì„± / ì¡°ê¸°ê²½ë³´ - ë‰´ìŠ¤ ëª¨ë‹ˆí„°ë§

### ì•¡ì…˜ 3ê°œ
- **D+14**: ë¦¬ìŠ¤í¬ ë§µí•‘ ë° ìš°ì„ ìˆœìœ„í™”
- **D+30**: ëŒ€ì‘ ì‹œë‚˜ë¦¬ì˜¤ë³„ í”Œëžœ B ìˆ˜ë¦½
- **D+60**: ë¦¬ìŠ¤í¬ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ê°€ë™

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] ì£¼ìš” ë¦¬ìŠ¤í¬ ì‹ë³„ ë° ë¶„ë¥˜
- [ ] ë¦¬ìŠ¤í¬ë³„ ì˜í–¥ë„/ë°œìƒí™•ë¥  í‰ê°€
- [ ] ëŒ€ì‘ ì±…ìž„ìž ì§€ì •
- [ ] ë¹„ìƒ ì—°ë½ë§ ì •ë¹„
- [ ] ë³´í—˜/ë²•ì  ëŒ€ë¹„ ì ê²€
- [ ] ê±´ê°• ê´€ë¦¬ ë£¨í‹´ í™•ë¦½
- [ ] ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ë°©ì•ˆ ë§ˆë ¨
"""
    },
    "calendar": {
        "section_id": "calendar",
        "title": "12ê°œì›” ë¹„ì¦ˆë‹ˆìŠ¤ ìŠ¤í”„ë¦°íŠ¸ ìº˜ë¦°ë”",
        "body_markdown": """## 12ê°œì›” ë¹„ì¦ˆë‹ˆìŠ¤ ìŠ¤í”„ë¦°íŠ¸ ìº˜ë¦°ë”

**[ì—”ì§„ ê²°ë¡ ]** ì›êµ­ì˜ ì›”ìš´ íë¦„ì— ë”°ë¼ ì‹œê¸°ë³„ ì „ëžµ ì¡°ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ëŒ€ìš´/ì„¸ìš´ì˜ íë¦„ìœ¼ë¡œ ì¸í•´, ë¶„ê¸°ë³„ ì—ë„ˆì§€ ë³€í™”ë¥¼ ê³ ë ¤í•œ ê³„íšì´ íš¨ê³¼ì ìž…ë‹ˆë‹¤.

### Q1 (1-3ì›”): ê¸°ë°˜ êµ¬ì¶•
- ì—°ê°„ ëª©í‘œ ìˆ˜ë¦½ ë° íŒ€ ì–¼ë¼ì¸ë¨¼íŠ¸
- í•µì‹¬ í”„ë¡œì„¸ìŠ¤ ì •ë¹„

### Q2 (4-6ì›”): ì„±ìž¥ ê°€ì†
- ë§ˆì¼€íŒ… ìº íŽ˜ì¸ ì§‘ì¤‘
- ì‹ ê·œ ê³ ê° í™•ë³´ ë“œë¼ì´ë¸Œ

### Q3 (7-9ì›”): ìµœì í™”
- ì„±ê³¼ ë¶„ì„ ë° í”¼ë²—
- íš¨ìœ¨ì„± ê°œì„  í”„ë¡œì íŠ¸

### Q4 (10-12ì›”): ìˆ˜í™• ë° ì¤€ë¹„
- ì—°ë§ ë§ˆê° ë° ì„±ê³¼ ì •ì‚°
- ì°¨ë…„ë„ ì „ëžµ ìˆ˜ë¦½

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] ë¶„ê¸°ë³„ OKR ì„¤ì •
- [ ] ì›”ê°„ ë¦¬ë·° ì¼ì • í™•ì •
- [ ] ì£¼ìš” ë§ˆì¼ìŠ¤í†¤ ìº˜ë¦°ë” ë“±ë¡
- [ ] ì‹œì¦Œë³„ í”„ë¡œëª¨ì…˜ ê³„íš
- [ ] íœ´ê°€/ì´ë²¤íŠ¸ ê³ ë ¤í•œ ë¦¬ì†ŒìŠ¤ í”Œëž˜ë‹
- [ ] ì™¸ë¶€ ì¼ì •(ì»¨í¼ëŸ°ìŠ¤, ì „ì‹œíšŒ) ì²´í¬
- [ ] ë¶„ê¸°ë³„ ì˜ˆì‚° ë°°ë¶„ ê³„íš
"""
    },
    "sprint": {
        "section_id": "sprint",
        "title": "í–¥í›„ 90ì¼ ë§¤ì¶œ ê·¹ëŒ€í™” ì•¡ì…˜í”Œëžœ",
        "body_markdown": """## í–¥í›„ 90ì¼ ë§¤ì¶œ ê·¹ëŒ€í™” ì•¡ì…˜í”Œëžœ

**[ì—”ì§„ ê²°ë¡ ]** ì›êµ­ì˜ ì‹ìƒ êµ¬ì¡°ì— ë”°ë¼ 90ì¼ ì§‘ì¤‘ ì‹¤í–‰ì´ íš¨ê³¼ì ìž…ë‹ˆë‹¤.

### ì›ì¸(ì‚¬ì£¼/ë£°ì¹´ë“œ) â†’ ì¦ìƒ(í˜„ìž¥) ì—°ê²°
ì‹ìƒì˜ ì—ë„ˆì§€ë¡œ ì¸í•´, ë‹¨ê¸° ì§‘ì¤‘ í”„ë¡œì íŠ¸ì—ì„œ ì„±ê³¼ê°€ ê¸°ëŒ€ë©ë‹ˆë‹¤.

### Week 1-2: ì§„ë‹¨ ë° ì…‹ì—…
- í˜„ìž¬ ë§¤ì¶œ êµ¬ì¡° ë¶„ì„
- í€µìœˆ ê¸°íšŒ ì‹ë³„
- íŒ€ ì—­í•  ë°°ë¶„

### Week 3-6: ì‹¤í–‰ 1ë‹¨ê³„
- í•µì‹¬ ì•¡ì…˜ ì•„ì´í…œ ì‹¤í–‰
- ì£¼ê°„ ì„±ê³¼ íŠ¸ëž˜í‚¹
- ë¹ ë¥¸ í”¼ë“œë°± ë£¨í”„

### Week 7-10: ê°€ì† ë° ì¡°ì •
- ì„±ê³¼ ê¸°ë°˜ ë¦¬ì†ŒìŠ¤ ìž¬ë°°ì¹˜
- ë³‘ëª© í•´ê²°
- ì¶”ê°€ ê¸°íšŒ ë°œêµ´

### Week 11-12: ë§ˆë¬´ë¦¬ ë° ë‹¤ìŒ ì‚¬ì´í´ ì¤€ë¹„
- 90ì¼ ì„±ê³¼ ì •ì‚°
- í•™ìŠµ í¬ì¸íŠ¸ ì •ë¦¬
- ë‹¤ìŒ 90ì¼ ê³„íš ìˆ˜ë¦½

### ì²´í¬ë¦¬ìŠ¤íŠ¸ 7ê°œ
- [ ] 90ì¼ ëª©í‘œ ìˆ˜ì¹˜ í™•ì •
- [ ] ì£¼ê°„ ì²´í¬ì¸ ì¼ì • ì„¤ì •
- [ ] í•µì‹¬ KPI ëŒ€ì‹œë³´ë“œ êµ¬ì¶•
- [ ] íŒ€ë³„ ì±…ìž„ ì•¡ì…˜ ë¦¬ìŠ¤íŠ¸
- [ ] ìœ„í´ë¦¬ ë¦¬ë·° í¬ë§· í™•ì •
- [ ] ì„±ê³¼ ì¸ì„¼í‹°ë¸Œ êµ¬ì¡° ì„¤ê³„
- [ ] 90ì¼ í›„ íšŒê³  ì¼ì • ì˜ˆì•½
"""
    }
}


def load_master_samples(version: str = "v1") -> Dict[str, Any]:
    """
    ë§ˆìŠ¤í„° ìƒ˜í”Œ ë¡œë“œ (utf-8-sigë¡œ BOM ì²˜ë¦¬ + 0ê°œ í´ë°±)
    """
    cache_key = version
    if cache_key in _MASTER_SAMPLES_CACHE:
        return _MASTER_SAMPLES_CACHE[cache_key]
    
    base_dir = Path(__file__).parent / version
    samples = {}
    
    if base_dir.exists():
        for json_file in base_dir.glob("*.json"):
            try:
                # ðŸ”¥ Bì•ˆ: bytesë¡œ BOM strip (ì² ë²½)
                raw = json_file.read_bytes()
                raw = raw.lstrip(b"\xef\xbb\xbf")
                data = json.loads(raw.decode("utf-8", errors="replace"))
                
                section_id = data.get("section_id", json_file.stem)
                samples[section_id] = data
                logger.debug(f"[MasterSamples] âœ… ë¡œë“œ: {section_id}")
            except Exception as e:
                logger.error(f"[MasterSamples] âŒ íŒŒì¼ ë¡œë“œ ì‹¤íŒ¨: {json_file.name} | error={e}")
    else:
        logger.warning(f"[MasterSamples] âš ï¸ ë””ë ‰í† ë¦¬ ì—†ìŒ: {base_dir}")
    
    # ðŸ”¥ P0: 0ê°œ ë¡œë“œ ì‹œ ë‚´ìž¥ í´ë°±
    if len(samples) == 0:
        logger.error(f"[MasterSamples] âŒ {version}=0ê°œ â†’ fallback to EMBEDDED_MASTER_SAMPLES")
        samples = EMBEDDED_MASTER_SAMPLES.copy()
    
    # ðŸ”¥ ë¡œë“œ ì™„ë£Œ ë¡œê·¸ (ì„¹ì…˜ í‚¤ ëª©ë¡ í¬í•¨)
    logger.info(f"[MasterSamples] {version} ë¡œë“œ ì™„ë£Œ: {len(samples)}ê°œ ì„¹ì…˜ | keys={sorted(samples.keys())}")
    
    _MASTER_SAMPLES_CACHE[cache_key] = samples
    return samples


def get_master_sample(section_id: str, version: str = "v1") -> Optional[Dict[str, Any]]:
    """íŠ¹ì • ì„¹ì…˜ì˜ ë§ˆìŠ¤í„° ìƒ˜í”Œ ë°˜í™˜"""
    samples = load_master_samples(version)
    return samples.get(section_id)


def get_master_body_markdown(section_id: str, version: str = "v1") -> str:
    """íŠ¹ì • ì„¹ì…˜ì˜ body_markdown ë°˜í™˜"""
    sample = get_master_sample(section_id, version)
    if sample:
        return sample.get("body_markdown", "")
    return ""


# ì„¹ì…˜ ID ë§¤í•‘ (í•œê¸€ ì œëª© â†’ section_id)
SECTION_ID_MAP = {
    "2026 ë¹„ì¦ˆë‹ˆìŠ¤ ì „ëžµ ê¸°ìƒë„": "exec",
    "ìžë³¸ ìœ ë™ì„± ë° í˜„ê¸ˆíë¦„ ìµœì í™”": "money",
    "ì‹œìž¥ í¬ì§€ì…”ë‹ ë° ìƒí’ˆ í™•ìž¥ ì „ëžµ": "business",
    "ì¡°ì§ í™•ìž¥ ë° íŒŒíŠ¸ë„ˆì‹­ ê°€ì´ë“œ": "team",
    "ì˜¤ë„ˆ ë¦¬ìŠ¤í¬ ê´€ë¦¬ ë° ë²ˆì•„ì›ƒ ë°©ì–´": "health",
    "12ê°œì›” ë¹„ì¦ˆë‹ˆìŠ¤ ìŠ¤í”„ë¦°íŠ¸ ìº˜ë¦°ë”": "calendar",
    "í–¥í›„ 90ì¼ ë§¤ì¶œ ê·¹ëŒ€í™” ì•¡ì…˜í”Œëžœ": "sprint",
}


def normalize_section_id(section_id_or_title: str) -> str:
    """ì„¹ì…˜ ID ì •ê·œí™”"""
    return SECTION_ID_MAP.get(section_id_or_title, section_id_or_title)
